<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم المدير - نظام الإحالة</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="user-info">
                <img id="user-avatar" src="https://ui-avatars.com/api/?name=مستخدم&background=random" alt="صورة المستخدم">
                <span id="username">مستخدم</span>
            </div>
            <h1><i class="fas fa-crown"></i> لوحة تحكم المدير</h1>
            <p>مرحبًا بك في لوحة تحكم المديرين</p>
        </header>
        
        <div class="tabs">
            <div class="tab" onclick="window.location.href='index.html'">الرئيسية</div>
            <div class="tab" onclick="window.location.href='dashboard.html'">لوحة التحكم</div>
            <div class="tab" onclick="window.location.href='network.html'">شبكتي</div>
            <div class="tab" onclick="window.location.href='management.html'">الإدارة</div>
            <div class="tab active admin-only">لوحة المدير</div>
            <div class="tab" id="logout-btn">تسجيل الخروج</div>
        </div>
        
        <div class="tab-content active">
            <h2><i class="fas fa-users-cog"></i> إدارة جميع المستخدمين</h2>
            <p>من هنا يمكنك إدارة جميع مستخدمي النظام وتعيين المديرين وإضافة النقاط.</p>
            
            <div class="filters">
                <input type="text" id="admin-search" placeholder="ابحث بالاسم أو البريد">
            </div>
            
            <div style="overflow-x: auto;">
                <table class="referrals-table">
                    <thead>
                        <tr>
                            <th>الاسم</th>
                            <th>البريد الإلكتروني</th>
                            <th>رمز الإحالة</th>
                            <th>الرتبة</th>
                            <th>النقاط</th>
                            <th>تاريخ الانضمام</th>
                            <th>الحالة</th>
                            <th>الإجراءات</th>
                        </tr>
                    </thead>
                    <tbody id="all-users-table">
                        <tr>
                            <td colspan="8" style="text-align: center;">جاري تحميل البيانات...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- نافذة تعيين مدير -->
    <div id="make-admin-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>تعيين مدير جديد</h3>
            <p>سيتم تعيين المستخدم <span id="admin-user-name"></span> كمدير للنظام.</p>
            <p>المديرون لديهم صلاحية إضافة النقاط وتعيين مديرين جدد.</p>
            <form id="make-admin-form">
                <input type="hidden" id="admin-user-id">
                <button type="submit">تعيين كمدير</button>
                <button type="button" class="cancel-btn" onclick="document.getElementById('make-admin-modal').style.display='none'">إلغاء</button>
            </form>
        </div>
    </div>

    <!-- نافذة إضافة النقاط من المدير -->
    <div id="admin-add-points-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>إضافة نقاط للمستخدم</h3>
            <p>إضافة نقاط للمستخدم: <span id="admin-points-user-name"></span></p>
            <form id="admin-add-points-form">
                <input type="hidden" id="admin-points-user-id">
                <div class="form-group">
                    <label for="admin-points-amount">عدد النقاط</label>
                    <input type="number" id="admin-points-amount" min="1" required>
                </div>
                <div class="form-group">
                    <label for="admin-points-reason">السبب</label>
                    <textarea id="admin-points-reason" rows="3" required></textarea>
                </div>
                <button type="submit">إضافة النقاط</button>
                <button type="button" class="cancel-btn" onclick="document.getElementById('admin-add-points-modal').style.display='none'">إلغاء</button>
            </form>
        </div>
    </div>

    <script type="module" src="app.js"></script>
    <script type="module" src="admin.js"></script>
</body>
</html>